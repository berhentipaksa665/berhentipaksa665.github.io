<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mengalihkan...</title>
<script>
(async function() {
  const host = location.hostname.toLowerCase(); 
  const parts = host.split(".");
  let target = "";

  if (parts.length >= 3) {
    const first = parts[0];      // contoh: sub atau www
    const second = parts[1];     // contoh: domain

    if (first === "www") {
      target = `/index/www.${second}.html`;  // www.domain.com -> /index/www.domain.html
    } else {
      target = `/index/${first}.${second}.html`; // sub.domain.com -> /index/sub.domain.html
    }

  } else if (parts.length === 2) {
    target = `/index/${parts[0]}.html`; // domain.com -> /index/domain.html
  } else {
    target = `/index/fallback.html`;
  }

  try {
    const res = await fetch(target);
    if (res.ok) {
      // Redirect langsung ke halaman yang valid
      location.replace(target);
    } else {
      // Muat isi fallback.html langsung di halaman ini
      const fb = await fetch("/index/fallback.html");
      const html = await fb.text();
      document.open();
      document.write(html);
      document.close();
    }
  } catch {
    // Jika fetch gagal total (misalnya offline), tampilkan fallback lokal
    const fb = await fetch("/index/fallback.html");
    const html = await fb.text();
    document.open();
    document.write(html);
    document.close();
  }
})();
</script>
</head>
<body>
<p>Mengalihkan ke halaman utama...</p>
</body>
</html>
