<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mengalihkan...</title>
<script>
(async function() {
  const host = location.hostname.toLowerCase(); // contoh: sub.domain.my.id
  const parts = host.split(".");
  let target = "";

  if (parts.length >= 3) {
    const first = parts[0];      // contoh: sub atau www
    const second = parts[1];     // contoh: domain

    if (first === "www") {
      target = `/index/www.${second}.html`;  // www.domain.com -> /index/www.domain.html
    } else {
      target = `/index/${first}.${second}.html`; // sub.domain.com -> /index/sub.domain.html
    }
  } else if (parts.length === 2) {
    target = `/index/${parts[0]}.html`; // domain.com -> /index/domain.html
  } else {
    target = `/index/fallback.html`;
  }

  // Cek apakah file target benar-benar ada
  try {
    const res = await fetch(target, { method: "HEAD" });
    if (res.ok) {
      location.replace(target); // Redirect langsung jika ada
    } else {
      location.replace("/index/fallback.html"); // Fallback jika tidak ada
    }
  } catch {
    location.replace("/index/fallback.html"); // Fallback jika fetch gagal
  }
})();
</script>
</head>
<body>
<p>Mengalihkan ke halaman utama...</p>
</body>
</html>
