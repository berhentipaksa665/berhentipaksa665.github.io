<div id="app">Loading...</div>  
  
<script>
(async () => {
  const host = window.location.hostname; // contoh: www.domain.my.id
  const parts = host.split(".");
  let filePath = "";

  // Fungsi bantu untuk ambil nama domain utama (bukan TLD)
  function getMainDomain(parts) {
    if (parts.length >= 3) return parts[parts.length - 3]; // domain.my.id / domain.co.id / domain.com
    return parts[0];
  }

  // 🔹 Tentukan file sesuai struktur domain
  if (parts.length > 2) {
    const sub = parts[0];
    const domainMain = getMainDomain(parts);

    if (sub === "www") {
      filePath = `/index/www.${domainMain}.index.html`;
    } else {
      filePath = `/index/${sub}.index.html`;
    }
  } else {
    const domainMain = getMainDomain(parts);
    filePath = `/index/${domainMain}.index.html`;
  }

  // 🔹 Fungsi load halaman
  async function loadPage(path) {
    const res = await fetch(path);
    if (!res.ok) throw new Error("not found");
    const html = await res.text();
    document.open();
    document.write(html);
    document.close();
  }

  // 🔹 Urutan fallback
  try {
    await loadPage(filePath);
  } catch {
    console.warn(`❌ Tidak ditemukan: ${filePath}, mencoba /index/fallback.index.html`);
    try {
      await loadPage("/index/fallback.index.html");
    } catch {
      console.warn("❌ fallback.index.html juga tidak ditemukan, pakai index.html utama.");
      document.body.innerHTML = "<div style='padding:2rem;text-align:center;'>Memuat halaman utama...</div>";
    }
  }
})();
</script>
