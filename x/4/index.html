---
layout: default
---

<div id="video-list" style="line-height:1.5;"></div>
<div id="pagination" style="margin-top:15px;"></div>

<script>
const perPage = 10;
let currentPage = 1;

fetch('/posts.json')
  .then(res => res.json())
  .then(posts => {
    window.allPosts = posts;
    renderPage();
  });

function renderPage() {
  const posts = window.allPosts;
  const list = document.getElementById("video-list");
  const totalPages = Math.ceil(posts.length / perPage);

  const start = (currentPage - 1) * perPage;
  const end = start + perPage;
  const slice = posts.slice(start, end);

  list.innerHTML = slice.map((p, i) => {
    const index = start + i + 1;
    const num = index < 10 ? `0${index}` : index;
    return `
      <div>
        <a href="${p.url}" style="text-decoration:none;">
          video ${num} ${p.title}.mp4
        </a>
      </div>
    `;
  }).join("");

  const nav = document.getElementById("pagination");
  nav.innerHTML = `
    ${currentPage > 1 ? `<button onclick="goto(${currentPage-1})">« Prev</button>` : ""}
    Page ${currentPage} / ${totalPages}
    ${currentPage < totalPages ? `<button onclick="goto(${currentPage+1})">Next »</button>` : ""}
  `;
}

function goto(p) {
  currentPage = p;
  renderPage();
  window.scrollTo({ top: 0, behavior: 'smooth' });
}
</script>
